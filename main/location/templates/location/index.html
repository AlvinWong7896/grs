{% extends 'core/base.html' %}
{% load static %}

{% block title %}Repair Shops{% endblock %}

{% block content %}

<div class="container">
  {% include 'core/sidebar.html' with latest_items=latest_items %}
  <div class="location-container">
    <h1>Bicycle Repair Shops</h1>
    
    {% if error %}
      <div class="bad-location">{{ error }}</div>
    {% endif %}
      
    <h3>Search for nearby bicycle repair shops</h3>
    <form id="address-form" action="{% url 'location:nearest_shops' %}" method="GET">
      <label for="address">Enter your address or postal code:</label>
      <input type="text" id="address" name="address">
      <button type="submit"></a>Find Nearest Shops</button>
    </form>
    <br>
    <h4>Your location: {{ location }}</h4>
    <br>
    <h3>The nearest Repair Shops</h3>
   <table class="table-container"> 
    <thead>
      <th>Shop name</th>
      <th>Shop address</th>
      <th>Contact person</th>
      <th>Contact number</th>
      <th>Approx distance</th>
    </thead>
    <tbody>
      {% for shop in nearest_shops %}
        <tr>
          <td>{{ shop.shop.name }}</td>
          <td>{{ shop.shop.address }}</td>
          <td>{{ shop.shop.contactName }}</td>
          <td>{{ shop.shop.phoneNumber }}</td>
          <td>{{ shop.distance }} km</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>  
  </div>
</div>

{% endblock %}