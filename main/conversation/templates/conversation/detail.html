{% extends 'core/base.html' %}
{% load static %}

{% block title %}Conversation{% endblock  %}


{% block content %}

<div class="container">
    <div class="sidebar">
      <h2 class="sub-title">Popular Blog Topics</h2>
      <div class="trending">
          <a href="#">Health tips</a>
          <a href="#">Bike DIY maintenance</a>
          <a href="#">Professional biking</a>
          <a href="#">Green advices</a>
      </div>
      <hr>
      <h2 class="sub-title">Latest Pre-owned</h2>
      <div class="preowned">
            
        {% for item in items %}
            <div class="latest">
                <a href="{% url 'item:detail' item.id %}"><img src="{{ item.image.url}}" alt="latest Image">
                    <p>{{ item.formatted_price }}</p>
                </a>
            </div> 
        {% endfor %}
    </div>
    </div>
    <div class="conversation-detail">
        <div class="pre-msg">
            <h1>Past communication regarding {{ conversation.item_name }}.</h1>
                <!-- {% for message in conversation.messages.all %}
                    <div class="p-6 flex {% if message.created_by == request.user %}bg-blue-100{% else %}bg-gray-100 {% endif %} rounded-xl">
                        <div>
                            <p class="mb-4"><strong>{{ message.created_by.username }}</strong> @ {{message.created_at }}</p>
                            <p>{{ message.content }}</p>
                        </div>
                    </div>
                {% endfor %} -->
                {% for message in conversation.messages.all %}
                    {% if message.created_by == request.user %}
                    <p class="blue-text"><strong>{{ message.created_by.username }}</strong> @ {{message.created_at }}</p>
                    <p class="blue-text">{{ message.content }}</p>
                    <br>

                {% else %} 
                    
                    <p class="gray-text"><strong>{{ message.created_by.username }}</strong> @ {{message.created_at }}</p>
                    <p class="gray-text">{{ message.content }}</p>
                    <br>

                    {% endif %}

                {% endfor %}

        </div>
        <div class="message-box">
            <p><strong>Enter your message below:</strong></p>
            {{ message.created_by.username }}
            <form method="post" action="." class="mt-6">
                {% csrf_token %}
                {{ form.as_p }}

                <button>Send</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}